<%= render "shared/alert" %>
<div class="row">
    <div class="col-md-12">
        <h2>Report</h2>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-5 col-xl-3">
        <%= render 'form' %>
    </div>
    <div class="col mt-2">
        <div class="row justify-content-center">
            <div class="col-sm-10 col-md-8 col-xl-6">
                <canvas
                    data-controller="chart"
                    data-chart-type-value="doughnut"
                    data-chart-data-value="<%= chart_data %>"
                    data-chart-options-value="<%= doughnut_chart_opts %>"
                ></canvas>
            </div>
        </div>
        <div class="mt-1 text-center text-secondary">
            Total: <%= total %>
        </div>
        <div class="mt-3 text-center text-secondary">
            <%= link_to '< Prev month' , report_by_category_path(:prev_month), class: "text-decoration-none" %>
            [ <%= @date_range.humanize %> ]
            <%= link_to 'Next month >', report_by_category_path(:next_month), class: "text-decoration-none" %>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-5 col-xl-4">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">Category</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            <% @operations_report.each do |category,amount| %>
            <tr>
                <td><%= category %></td>
                <td><%= amount.round(2) %></td>
            </tr>
            <% end %>
            <tr>
                <td><b>Total:</b></td>
                <td><%= total %></td>
            </tr>
        </tbody>
    </table>
</div>
</div>
